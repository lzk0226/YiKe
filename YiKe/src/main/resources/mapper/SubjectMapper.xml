<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.yike.mapper.SubjectMapper">

    <!-- 映射Subject实体 -->
    <resultMap id="SubjectResult" type="com.ruoyi.yike.domain.Subject">
        <result property="id" column="id"/>
        <result property="code" column="code"/>
        <result property="name" column="name"/>
        <result property="description" column="description"/>
<!--        <result property="sortOrder" column="sort_order"/>-->
<!--        <result property="status" column="status"/>-->
<!--        <result property="createdAt" column="created_at"/>-->
    </resultMap>

    <!-- 基础查询SQL -->
    <sql id="Base_Select">
        SELECT id, code, name, description
        FROM subjects
    </sql>

    <!-- 查询学科分类列表 -->
    <select id="selectSubjectList" parameterType="com.ruoyi.yike.domain.Subject" resultMap="SubjectResult">
        <include refid="Base_Select"/>
        <where>
            <if test="code != null and code != ''">AND code = #{code}</if>
            <if test="name != null and name != ''">AND name LIKE CONCAT('%', #{name}, '%')</if>
            <if test="description != null and description != ''">AND description LIKE CONCAT('%', #{description}, '%')</if>
        </where>
    </select>

    <!-- 查询单个学科分类 -->
    <select id="selectSubjectById" parameterType="Long" resultMap="SubjectResult">
        <include refid="Base_Select"/>
        WHERE id = #{id}
    </select>
</mapper>
